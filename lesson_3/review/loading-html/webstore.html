<!DOCTYPE html>
<html lang="en">
  <head>
    <title>Web Store</title>
    <meta charset="utf-8" />
  </head>
  <body>
    <h1>Existing Page</h1>
    <div id="store"></div>
  </body>
  <script>
    document.addEventListener('DOMContentLoaded', function() {
      let store = document.getElementById('store');
      let request = new XMLHttpRequest();
      request.open('GET', 'https://ls-230-web-store-demo.herokuapp.com/products');
      request.addEventListener('load', e => store.innerHTML = request.response);
      request.send();

      store.addEventListener('click', e => {
        let target = e.target;
        if (target.tagName !== 'A') return;

        e.preventDefault();

        let request = new XMLHttpRequest();
        request.open('GET', 'https://ls-230-web-store-demo.herokuapp.com' + target.getAttribute('href'));
        request.addEventListener('load', e => store.innerHTML = request.response);
        request.send();
      })

      store.addEventListener('submit', e => {
        e.preventDefault();
        let form = e.target;
        let data = new FormData(form);
        let request = new XMLHttpRequest();
        request.open('POST', 'https://ls-230-web-store-demo.herokuapp.com' + form.getAttribute('action'));
        request.setRequestHeader('Authorization', 'token AUTH_TOKEN');
        request.addEventListener('load', () => store.innerHTML = request.responseText);
      
        request.send(data);
      });
    });
  </script>
</html>